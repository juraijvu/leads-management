{% extends "base.html" %}

{% block title %}Lead Details - {{ lead.name }}{% endblock %}

{% block breadcrumb %}
{{ super() }}
<li class="breadcrumb-item"><a href="{{ url_for('main.leads') }}">Leads</a></li>
<li class="breadcrumb-item active">{{ lead.name }}</li>
{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <div class="dashboard-card">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4>{{ lead.name }}</h4>
                <div class="d-flex gap-2">
                    <a href="{{ url_for('main.edit_lead', id=lead.id) }}" class="btn btn-primary">
                        <i class="fas fa-edit me-2"></i>Edit
                    </a>
                    <a href="{{ url_for('main.delete_lead', id=lead.id) }}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this lead?')">
                        <i class="fas fa-trash me-2"></i>Delete
                    </a>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <h5>Personal Information</h5>
                    <p><strong>Name:</strong> {{ lead.name }}</p>
                    <p><strong>Phone:</strong> {{ lead.phone }}</p>
                    <p><strong>WhatsApp:</strong> {{ lead.whatsapp or 'Not specified' }}</p>
                    <p><strong>Email:</strong> {{ lead.email or 'Not specified' }}</p>
                </div>
                <div class="col-md-6">
                    <h5>Lead Details</h5>
                    <p><strong>Course Interest:</strong> {{ lead.course_interest.name if lead.course_interest else 'Not specified' }}</p>
                    <p><strong>Lead Source:</strong> {{ lead.lead_source or 'Not specified' }}</p>
                    <p><strong>Status:</strong> {{ lead.status }}</p>
                    <p><strong>Quoted Amount:</strong> ${{ "{:,.2f}".format(lead.quoted_amount) if lead.quoted_amount > 0 else 'Not quoted' }}</p>
                    <p><strong>Last Contact:</strong> {{ lead.last_contact_date.strftime('%Y-%m-%d') if lead.last_contact_date else 'Never' }}</p>
                    <p><strong>Next Follow-up:</strong> {{ lead.next_followup_date.strftime('%Y-%m-%d') if lead.next_followup_date else 'Not set' }}</p>
                    <p><strong>Follow-up Type:</strong> {{ lead.followup_type or 'Not specified' }}</p>
                </div>
            </div>
            
            <div class="mt-4">
                <h5>Comments</h5>
                <p>{{ lead.comments or 'No comments' }}</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}